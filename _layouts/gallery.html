---
layout: default
---

<div class="gallery">
  <h1>{{ page.title }}</h1>

  {% for painting in site.data.paintings %}
    <div class="painting">
      <h2>{{ painting.title }}</h2>
      <p>{{ painting.description }}</p>

      <!-- Превью -->
      <img src="{{ painting.images[0] }}" alt="Превью" class="preview-img" onclick="openModal('{{ painting.title }}', {{ forloop.index0 }})">
    </div>
  {% endfor %}
</div>

<!-- Модальное окно -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <button class="prev" onclick="prevImage()">❮</button>
    <img id="modal-img" src="" />
    <button class="next" onclick="nextImage()">❯</button>
    <div class="caption" id="modal-caption"></div>
    <div class="counter" id="modal-counter"></div>
  </div>
</div>

<style>
.modal {
  display: none;
  position: fixed;
  z-index: 999;
  padding-top: 60px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.9);
}

.modal-content {
  margin: auto;
  display: block;
  max-width: 90%;
  max-height: 80vh;
  text-align: center;
  position: relative;
}

#modal-img {
  max-width: 100%;
  max-height: 70vh;
  border-radius: 8px;
}

.prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 40px;
  color: white;
  background: rgba(0,0,0,0.5);
  border: none;
  padding: 10px;
  border-radius: 50%;
}

.prev { left: 20px; }
.next { right: 20px; }

.close {
  position: absolute;
  top: 20px;
  right: 45px;
  font-size: 40px;
  font-weight: bold;
  color: #fff;
  cursor: pointer;
}

.counter {
  color: white;
  margin-top: 10px;
}
</style>

<script>
// Переносим данные картин из Jekyll в JS
const paintings = [
  {% for painting in site.data.paintings %}
  {
    title: "{{ painting.title }}",
    images: [
      {% for image in painting.images %}
        "{{ image }}",
      {% endfor %}
    ]
  },
  {% endfor %}
];

let currentPaintingIndex = 0;
let currentImageIndex = 0;

function openModal(title, index) {
  currentPaintingIndex = index;
  currentImageIndex = 0;
  const modal = document.getElementById("modal");
  const img = document.getElementById("modal-img");
  const caption = document.getElementById("modal-caption");
  const counter = document.getElementById("modal-counter");

  img.src = paintings[index].images[currentImageIndex];
  caption.innerText = title;
  updateCounter();

  modal.style.display = "block";
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}

function prevImage() {
  if (currentImageIndex > 0) {
    currentImage
